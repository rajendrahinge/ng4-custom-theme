{"version":3,"sources":["../../src/async-local-storage_module.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,QAAA,EAAS,MAAO,eAAA,CAAgB;AAEzC,OAAO,EAAE,iBAAA,EAAkB,MAAO,uBAAA,CAAwB;AAC1D,OAAO,EAAsB,iBAAA,EAAmB,oBAAA,EAAsB,iBAAA,EAAkB,MAAO,mBAAA,CAAoB;AAEnH,MAAM;IAEF,IAAI,QAAU,CAAmB;IAEjC,IAAI,CAAA;QAEA,2CAA2C;QAC3C,QAAQ,GAAG,IAAI,iBAAA,EAAkB,CAAE;IAEvC,CAAC;IAAC,KAAA,CAAA,CAAA,KAAQ,CAAK,CAAC,CAAA;QAEZ,IAAI,CAAA;YAEA,iDAAiD;YACjD,QAAQ,GAAG,IAAI,oBAAA,EAAqB,CAAE;QAE1C,CAAC;QAAC,KAAA,CAAA,CAAA,KAAQ,CAAK,CAAC,CAAA;YAEZ,yDAAyD;YACzD,QAAQ,GAAG,IAAI,iBAAA,EAAkB,CAAE;QAEvC,CAAC;IAEL,CAAC;IAED,MAAM,CAAC,IAAI,iBAAA,CAAkB,QAAC,CAAQ,CAAC;AAE3C,CAAC;AAAA,CAAC;AAGF;IAAA;IAaA,CAAC;IAAD,8BAAC;AAAD,CAbA,AAaC;;AAb4C,kCAAU,GAA0B;IACjF,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;gBACrB,SAAS,EAAE;oBACP;wBACI,OAAO,EAAE,iBAAiB;wBAC1B,UAAU,EAAE,wBAAwB;qBACvC;iBACJ;aACJ,EAAG,EAAE;CACL,CAAC;AACF,kBAAkB;AACX,sCAAc,GAAmE,cAAM,OAAA,EAC7F,EAD6F,CAC7F,CAAC","file":"async-local-storage_module.js","sourceRoot":"","sourcesContent":["import { NgModule } from '@angular/core';\n\nimport { AsyncLocalStorage } from './async-local-storage';\nimport { AsyncLocalDatabase, IndexedDBDatabase, LocalStorageDatabase, MockLocalDatabase } from './databases/index';\n\nexport function asyncLocalStorageFactory() {\n\n    let database: AsyncLocalDatabase;\n\n    try {\n\n        /* Try with IndexedDB in modern browsers */\n        database = new IndexedDBDatabase();\n\n    } catch (error) {\n\n        try {\n\n            /* Try with localStorage in old browsers (IE9) */\n            database = new LocalStorageDatabase();\n\n        } catch (error) {\n\n            /* Fake database for server-side rendering (Universal) */\n            database = new MockLocalDatabase();\n\n        }\n        \n    }\n\n    return new AsyncLocalStorage(database);\n\n};\n\n\nexport class AsyncLocalStorageModule {static decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n    providers: [\n        {\n            provide: AsyncLocalStorage, \n            useFactory: asyncLocalStorageFactory\n        }\n    ]\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}